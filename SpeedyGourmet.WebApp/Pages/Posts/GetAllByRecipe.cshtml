@page
@model SpeedyGourmet.WebApp.Pages.Posts.GetAllByRecipeModel
@{
}

<br>

<form method="post">

    <label>Get posts list by recipe id: </label>

    <select name="id_recipe">
        <label>Choose a recipe: </label>
        @foreach (Model.Recipe recipe in Model.recipes)
        {
            <option value="@recipe.Id">@recipe.Title</option>
        }
    </select>

    <br>

    <button type="submit" class="btn btn-primary ml-2">Submit</button>

</form>

<br>

<table class="table">

    <thead>
        <tr>
            <th>User</th>
            <th>Recipe</th>
            <th>Rating</th>
        </tr>
    </thead>

    <tbody>

        @foreach (Model.Post post in Model.posts)
        {
            <tr>
                <td>@post.User.UserName</td>
                <td>@post.Recipe.Title</td>
                <td>@post.Rating</td>
                <td>
                    <a asp-page="/Posts/Delete" asp-route-id="@post.Id">Delete</a> /
                    <a asp-page="/Posts/GetById" asp-route-id="@post.Id">View</a>
                </td>
            </tr>
            <tr>
                <td>@Model.post.Comment</td>
            </tr>
        }

    </tbody>

</table>

<div class="d-flex justify-content-between">
    <a class="btn btn-danger" asp-area="" asp-page="/Posts/GetAll"> Return to Get All <i class="bi bi-arrow-left"></i></a>
</div>